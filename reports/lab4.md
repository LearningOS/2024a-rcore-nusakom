## 问答作业

在文件系统（如 `easy-fs`）中，**root inode（根 inode）** 扮演着非常关键的角色，它是文件系统层次结构的起点。具体来说，root inode 代表着文件系统中的根目录，文件系统中的所有路径最终都会通过根目录来访问。

### **Root inode 的作用**

1. **代表根目录**：在一个典型的文件系统中，根目录是文件系统结构中的起始点。所有的文件和目录都是以根目录为基点的，文件系统的路径结构（如 `/home/user/file`）都是相对于根目录的。
   
2. **存储目录项**：根 inode 通常存储根目录下的文件或子目录的列表，或者说，根目录的内容。它通过指向其他 inode 来管理和访问这些文件或目录。

3. **管理文件系统的元数据**：inode（包括 root inode）包含了文件的元数据，比如文件的权限、所有者、文件大小、时间戳等。虽然 root inode 主要指向的是根目录的内容，但它依然是一个 inode，它会有相应的文件元数据。

4. **是文件系统访问的入口**：文件系统启动或挂载时，root inode 是访问文件系统的入口。系统通过访问 root inode 来找到并访问文件系统中的其他内容。

### **如果 root inode 损坏了会发生什么？**

1. **无法访问文件系统中的任何文件**：
   - 根目录是文件系统的起点，如果 root inode 损坏，整个文件系统的访问就会被阻断。用户无法通过文件路径访问任何文件或目录，因为没有根目录作为文件系统结构的起点。
   
2. **文件系统挂载失败**：
   - 在很多操作系统中，如果根 inode 损坏，系统在挂载文件系统时会失败。因为根 inode 是文件系统结构的入口，损坏的 root inode 会导致操作系统无法正确加载文件系统的内容。
   
3. **文件系统可能变得不可用**：
   - 如果损坏的 root inode 仅仅是根目录的 inode，而其他目录和文件的 inode 完好无损，那么文件系统依然可能存在一定的数据恢复可能性。但如果根目录的 inode 本身损坏，就很难访问到文件系统中的任何文件，整个文件系统变得不可用。

4. **数据丢失**：
   - 如果 root inode 损坏且无法修复，可能导致与根目录相关联的所有数据都无法恢复。即使其他的文件或目录未必丢失，修复损坏的 root inode 也可能需要重新格式化文件系统，从而导致文件丢失。

5. **系统崩溃或进入维护模式**：
   - 在一些操作系统中，如果 root inode 损坏，操作系统可能会启动进入一个维护模式或紧急修复模式，要求管理员修复文件系统。

### **总结**

## 实现的功能

`easy-fs` 中的 root inode 是文件系统的基础结构之一，它指向根目录，进而允许对整个文件系统的访问。如果 root inode 损坏，整个文件系统的访问将被中断，导致无法挂载或访问文件系统中的任何内容。为了避免这种情况，一些文件系统设计会使用冗余机制（如日志或快照）来提高文件系统的容错能力。

在本次编程作业中，我实现了三个文件系统相关的系统调用：sys_linkat、sys_unlinkat 和 sys_stat。

sys_linkat：用于创建文件的硬链接。通过提供原文件路径和新路径，使新路径指向原文件的 inode，从而实现文件名的别名。多个硬链接可以共享同一个文件内容，直到所有链接都被删除，文件才会被彻底清除。

sys_unlinkat：用于删除文件链接。通过减少文件的硬链接计数来删除文件，只有当所有链接都被删除时，文件和其占用的磁盘空间才会被回收。

sys_stat：用于查询文件的元数据，如文件的类型、inode 编号和硬链接计数等信息。

这些系统调用的实现使得文件系统能够处理硬链接的创建、删除以及文件的状态查询，为文件管理提供了基本操作支持。

## 荣誉准则

1. 在完成本次实验的过程（含此前学习的过程）中，我曾分别与 以下各位 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：

    《你交流的对象说明》

2. 此外，我也参考了 以下资料 ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：

    《你参考的资料说明》

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。